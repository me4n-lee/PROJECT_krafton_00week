<!DOCTYPE html>
<html>

<head>
    <title>WRITE</title>
</head>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    function post_article() {
        let title = $("#post-title").val();
        let url = $("#post-url").val();
        let content = $("#post-content").val();
        let category = $("#post-category").val();


        // 2. memo에 POST 방식으로 메모 생성 요청하기
        $.ajax({
            type: "POST", // POST 방식으로 요청하겠다.
            url: "/api/write", // /memo라는 url에 요청하겠다.
            data: { title_give: title, url_give: url, content_give: content, category_give: category, }, // 데이터를 주는 방법
            success: function (response) { // 성공하면
                if (response["result"] == "success") {
                    alert("포스팅 성공!");
                    // 3. 성공 시 페이지 새로고침하기
                    window.location.href = '/home';
                } else {
                    alert("서버 오류!")
                }
            }
        })
    }
</script>

<body>
    <header>
        <h1 class="text-center text-4xl font-bold mb-[20px]">게시글 작성</h1>

    </header>
    <div class="bg-gray-300 w-[800px] h-[720px] mx-auto px-[20px] pt-5 rounded-lg">
        <main>
            <label for="category" class="text-2xl mb-[10px] font-bold block">카테고리</label>
            <select id="post-category" name="category" class="h-10 rounded mb-[20px] indent-3 w-1/4">
                <option value="category1">Category 1</option>
                <option value="category2">Category 2</option>
                <option value="category3">Category 3</option>
            </select>
            <select name="" id="" disabled class="h-10 rounded mb-[20px] indent-3 w-2/5">
                <option value=""></option>
            </select>
            <label for="title" class="text-2xl mb-[10px] font-bold block">제목</label>
            <input type="text" id="post-title" name="title" class="h-10 w-4/5 rounded mb-[20px] indent-3"
                placeholder="강의 혹은 책의 제목을 입력해주세요.">
            <label for="url" class="text-2xl mb-[10px] font-bold block">URL</label>
            <input type="text" id="post-url" name="url" class="h-10 w-4/5 rounded mb-[20px] indent-3"
                placeholder="URL을 입력해주세요.">
            <label for="content" class="text-2xl mb-[10px] font-bold block">Content</label>
            <textarea id="post-content" name="content" rows="5" cols="40"
                class="h-[250px] w-full rounded mb-[20px] indent-3 resize-none pt-[10px]"
                placeholder="이 게시글을 추천하는 이유 혹은 내용 요약"></textarea>
            <div class="flex justify-between mx-[100px]">
                <button type="submit" name="cancel" onclick="location.href='/home'"
                    class="text-xl bg-gray-400 w-[170px] h-[50px] rounded-lg font-bold">취소</button>
                <button type="submit" name="confirm" onclick="post_article()"
                    class="text-xl bg-green-300 w-[170px] h-[50px] rounded-lg font-bold">게시글 등록</button>
            </div>
        </main>
    </div>
</body>

</html>