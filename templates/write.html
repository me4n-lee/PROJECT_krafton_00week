<!DOCTYPE html>
<html>

<head>
    <title>WRITE</title>
</head>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
<script>
    function post_article() {
        let title = $("#post-title").val();
        let url = $("#post-url").val();
        let content = $("#post-content").val();
        let category = $("#post-category").val();


        // 2. memo에 POST 방식으로 메모 생성 요청하기
        $.ajax({
            type: "POST", // POST 방식으로 요청하겠다.
            url: "/api/write", // /memo라는 url에 요청하겠다.
            data: {title_give: title, url_give: url, content_give: content, category_give: category}, // 데이터를 주는 방법
            success: function (response) { // 성공하면
                if (response["result"] == "success") {
                    alert("포스팅 성공!");
                    // 3. 성공 시 페이지 새로고침하기
                    window.location.reload();
                } else {
                    alert("서버 오류!")
                }
            }
        })
    }
</script>
<body>
    <header>
        <h1>Category Dropdown with Input Form</h1>
        <nav>
            <ul>
                <li class="dropdown">
                    <a href="#">Category</a>
                    <div class="dropdown-content">
                        <a href="#">Category 1</a>
                        <a href="#">Category 2</a>
                        <a href="#">Category 3</a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        <label for="category">Category:</label>
        <select id="post-category" name="category">
            <option value="category1">Category 1</option>
            <option value="category2">Category 2</option>
            <option value="category3">Category 3</option>
        </select>
        <br><br>
        <label for="title">Title:</label>
        <input type="text" id="post-title" name="title"><br><br>
        <label for="url">URL:</label>
        <input type="text" id="post-url" name="url"><br><br>
        <label for="content">Content:</label>
        <textarea id="post-content" name="content" rows="5" cols="40"></textarea><br><br>
        <button type="submit" name="cancel" onclick="location.href='/home'">Cancel</button>
        <button type="submit" name="confirm" onclick="post_article()">Confirm</button>
    </main> 
</body>

</html>